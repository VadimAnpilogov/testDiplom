<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Spring Boot - AJAX POST GET Example</title>



    <head th:replace="fragments/head :: head"></head>
    <head th:replace="fragments/style :: style"></head>
    <!--<body th:replace="fragments/menu :: menu"></body>-->
<body th:replace="fragments/upMenu :: upMenu"></body>
<body th:replace="fragments/homeMenu :: homeMenu"></body>
<script src="/js/postMessage.js"></script>
<script src="/js/getMessage.js"></script>
<script src="js/dialog.js"></script>
<script src="js/getDialog.js"></script>
<script src="js/whichDialog.js"></script>
</head>
<body class="noScroll">

<!--<script>-->
<!--    function hidden(){-->
<!--        document.getElementsByClassName('enter').style.display = "none";-->
<!--    }-->
<!--</script>-->

<div class="widget_message" id="widget_message">
<!--    <form class="createDialogButton" action="users">-->
<!--        <button type="submit" class="btn btn-outline-info">Создать диалог</button>-->
<!--    </form>-->


    <div id="mySidenav" class="sidenav" >
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
<!--        <h5>Выберите пользователя, которому хотите написать</h5>-->
<!--        <a th:utext="${dialog.username}"></a>-->
        <input class="createDialogTextArea" type="text" placeholder="Search.." id="myInput" onkeyup="filterFunction()">
        <ul style=" margin-right: 20px; margin-left: 20px;" id="dialogUL">
<!--            <h5 th:text="${messageDialogs}"></h5>-->
            <li th:each="dialog : ${messageU}" id="liDialog">
                <div class="message_list">
                    <div class="chat_people">
                        <div class="chat_img"><a th:href="@{'/userPers/{users}'(users=${dialog.username})}"><img src="https://ptetutorials.com/images/user-profile.png" alt="sunil"></a></div>
                        <div class="chat_ib">
                            <a th:href="@{'/messageUsers/{recipient}'(recipient=${dialog.username})}" class="username_msg">
                                <h5 th:utext="${dialog.username}" class="username_msg" id="UsernameDialog">Sunil Rajput <span class="chat_date">Dec 25</span></h5>
                            </a>
                        </div>
                    </div>
                </div>
            </li>
        </ul>


    </div>

    <div id="getResultDialog">
        <div id="searchDialogMenu" class="searchDialogMenu">
            <input class="searchDialogTextArea" type="text" placeholder="Search.." id="searchDialog" onkeyup="filterDialogFunction()">
            <button onclick="openNav()" type="button" class="btn btn-outline-info createDialogButton">Создать диалог</button>
        </div>

        <ul>
            <li th:each="dialog : ${dialogsUser}">
                <div class="message_list" id="dialogID">
                    <div class="chat_people">
                        <div class="chat_img">
                            <a th:href="@{'/userPers/{users}'(users=${dialog.recipient})}">
                                <img src='https://ptetutorials.com/images/user-profile.png' alt='sunil'>
                            </a>
                        </div>
                        <div class="chat_ib">
                            <a th:href="@{'/messageU/{recipient}'(recipient=${dialog.recipient})}"  class="username_msg">
                                <h5 id='recipient' class='username_msg' th:utext="${dialog.recipient}"></h5>
                            </a>
                        </div>
                    </div>
                </div>
            </li>
        </ul>
    </div>

</div>


<div class="msgs" style="color: white" id="getResultMessage">
    <div class="spinner-border text-light spinnerMessage" role="status" id="loading">
        <span class="sr-only">Loading...</span>
    </div>
</div>


<!--<div class="msgs">-->
    <!--<div th:each="mesS : ${messageS}">-->
        <!--<div th:if="${mesS.sender != #httpServletRequest.remoteUser}" class="received_msg" >-->
            <!--<div class="received_withd_msg">-->
                <!--<p th:utext="${mesS.message}">Apollo University, Delhi, India Test</p>-->
                <!--<span class="time_dateInMes" th:utext="${mesS.date}"> 11:01 AM    |    Today</span>-->
            <!--</div>-->
        <!--</div>-->
        <!--<div th:if="${mesS.sender == #httpServletRequest.remoteUser}" class="outgoing_msg" >-->
            <!--<div class="sent_msg">-->
                <!--<p th:utext="${mesS.message}">Apollo University, Delhi, India Test</p>-->
                <!--<span class="time_dateOutMes" th:utext="${mesS.date}"> 11:01 AM    |    Today</span>-->
            <!--</div>-->
        <!--</div>-->
    <!--</div>-->
    <!--<span id="endpage"></span>-->
<!--</div>-->


<div class="enter" id="enterID" style="visibility: hidden">
    <div class="type_msg">
        <form id="customerForm">
            <div class="input_msg_write">
                <textarea id="message" maxlength="1000" type="message1" name="message" class="write_msg" placeholder="Введите сообщение" autocomplete="off" required></textarea>
                <button class="msg_send_btn" type="submit"><i class="fa fa-paper-plane-o" aria-hidden="true"></i></button>
            </div>
        </form>
    </div>
</div>
<!--<div class="getEnterMessage2" th:if="${test == null}">-->
    <!--<div class="getEnterMessage">-->
        <!--<img src="https://img.icons8.com/color/96/000000/chat.png">-->
        <!--<a>Выберите диалог</a>-->
    <!--</div>-->
<!--</div>-->

</body>
</html>