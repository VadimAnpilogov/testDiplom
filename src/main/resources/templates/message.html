<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/head :: head"></head>
<title>Сообщения</title>
<body th:replace="fragments/upMenu :: upMenu"></body>
<body th:replace="fragments/homeMenu :: homeMenu"></body>
<script src="/js/postMessage.js"></script>
<script src="/js/getMessage.js"></script>
<script src="js/dialog.js"></script>
<script src="js/getDialog.js"></script>

<body class="noScroll">

<!--<script>-->
<!--    function hidden(){-->
<!--        document.getElementsByClassName('enter').style.display = "none";-->
<!--    }-->
<!--</script>-->

<div class="widget_message" id="widget_message">
<!--    <form class="createDialogButton" action="users">-->
<!--        <button type="submit" class="btn btn-outline-info">Создать диалог</button>-->
<!--    </form>-->


    <div id="mySidenav" class="sidenav" >
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
<!--        <h5>Выберите пользователя, которому хотите написать</h5>-->
<!--        <a th:utext="${dialog.username}"></a>-->
        <input class="createDialogTextArea" type="text" placeholder="Поиск" id="myInput" onkeyup="filterFunction()">
        <ul style=" margin-right: 20px; margin-left: 20px;" id="dialogUL">
<!--            <h5 th:text="${messageDialogs}"></h5>-->
            <li th:each="dialog : ${messageU}" id="liDialog">
                <div class="message_list">
                    <div class="chat_people">
                        <div class="chat_img"><a th:href="@{'/userPers/{users}'(users=${dialog.username})}"><img src="https://ptetutorials.com/images/user-profile.png" alt="sunil"></a></div>
                        <div class="chat_ib">
                            <a th:href="@{'/messageUsers/{recipient}'(recipient=${dialog.username})}" class="username_msg">
                                <h5 th:utext="${dialog.username}" class="username_msg" id="UsernameDialog">Sunil Rajput <span class="chat_date">Dec 25</span></h5>
                            </a>
                        </div>
                    </div>
                </div>
            </li>
        </ul>


    </div>

    <div id="getResultDialog">
        <div id="searchDialogMenu" class="searchDialogMenu">
            <input class="searchDialogTextArea" type="text" placeholder="Поиск" id="searchDialog" onkeyup="filterDialogFunction()">
            <button onclick="openNav()" type="button" class="btn btn-outline-info createDialogButton">Создать диалог</button>
        </div>

        <ul>
            <li th:each="dialog : ${dialogsUser}">

                <div th:if="${colorDialog == dialog.recipient}" style="border-bottom: 1px solid #c4c4c4;">
                    <div class="message_list lightDialog" id="dialogIDThis">
                        <div class="chat_people">
                            <div class="chat_img">
                                <a th:href="@{'/userPers/{users}'(users=${dialog.recipient})}">
                                    <img src='https://ptetutorials.com/images/user-profile.png' alt='sunil'>
                                </a>
                            </div>
                            <div class="chat_ib">
                                <a th:href="@{'/messageU/{recipient}'(recipient=${dialog.recipient})}" class="username_msg">
                                    <h5 id='recipientThis' class='username_msg' th:utext="${dialog.recipient}"></h5>
                                </a>
                            </div>
                            <div class="deleteButton">
                                <a th:href="@{'/deleteDialog/{id}'(id=${dialog.id})}">
                                    <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                                         width="20"
                                         viewBox="0 0 172 172"
                                         style=" fill:#000000;"><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,172v-172h172v172z" fill="none"></path><g fill="#24282c"><path d="M40.13333,22.93333c-1.46702,0 -2.93565,0.55882 -4.05365,1.67969l-11.46667,11.46667c-2.24173,2.24173 -2.24173,5.87129 0,8.10729l41.81302,41.81302l-41.81302,41.81302c-2.24173,2.24173 -2.24173,5.87129 0,8.10729l11.46667,11.46667c2.24173,2.24173 5.87129,2.24173 8.10729,0l41.81302,-41.81302l41.81302,41.81302c2.236,2.24173 5.87129,2.24173 8.10729,0l11.46667,-11.46667c2.24173,-2.24173 2.24173,-5.87129 0,-8.10729l-41.81302,-41.81302l41.81302,-41.81302c2.24173,-2.236 2.24173,-5.87129 0,-8.10729l-11.46667,-11.46667c-2.24173,-2.24173 -5.87129,-2.24173 -8.10729,0l-41.81302,41.81302l-41.81302,-41.81302c-1.12087,-1.12087 -2.58663,-1.67969 -4.05365,-1.67969z"></path></g></g></svg>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <div th:if="${colorDialog != dialog.recipient}" style="border-bottom: 1px solid #c4c4c4;">
                    <div class="message_list" id="dialogID">
                        <div class="chat_people">
                            <div class="chat_img">
                                <a th:href="@{'/userPers/{users}'(users=${dialog.recipient})}">
                                    <img src='https://ptetutorials.com/images/user-profile.png' alt='sunil'>
                                </a>
                            </div>
                            <div class="chat_ib">
                                <a th:href="@{'/messageU/{recipient}'(recipient=${dialog.recipient})}" class="username_msg">
                                    <h5 id='recipient' class='username_msg' th:utext="${dialog.recipient}"></h5>
                                </a>
                            </div>
                            <div class="deleteButton">
                                <a th:href="@{'/deleteDialog/{id}'(id=${dialog.id})}">
                                    <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                                         width="20"
                                         viewBox="0 0 172 172"
                                         style=" fill:#000000;"><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,172v-172h172v172z" fill="none"></path><g fill="#24282c"><path d="M40.13333,22.93333c-1.46702,0 -2.93565,0.55882 -4.05365,1.67969l-11.46667,11.46667c-2.24173,2.24173 -2.24173,5.87129 0,8.10729l41.81302,41.81302l-41.81302,41.81302c-2.24173,2.24173 -2.24173,5.87129 0,8.10729l11.46667,11.46667c2.24173,2.24173 5.87129,2.24173 8.10729,0l41.81302,-41.81302l41.81302,41.81302c2.236,2.24173 5.87129,2.24173 8.10729,0l11.46667,-11.46667c2.24173,-2.24173 2.24173,-5.87129 0,-8.10729l-41.81302,-41.81302l41.81302,-41.81302c2.24173,-2.236 2.24173,-5.87129 0,-8.10729l-11.46667,-11.46667c-2.24173,-2.24173 -5.87129,-2.24173 -8.10729,0l-41.81302,41.81302l-41.81302,-41.81302c-1.12087,-1.12087 -2.58663,-1.67969 -4.05365,-1.67969z"></path></g></g></svg>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>




            </li>
        </ul>
    </div>

</div>


<div class="msgs" style="color: white" id="getResultMessage">
    <div class="spinner-border text-light spinnerMessage" role="status" id="loading">
        <span class="sr-only">Loading...</span>
    </div>
</div>


<!--<div class="msgs">-->
    <!--<div th:each="mesS : ${messageS}">-->
        <!--<div th:if="${mesS.sender != #httpServletRequest.remoteUser}" class="received_msg" >-->
            <!--<div class="received_withd_msg">-->
                <!--<p th:utext="${mesS.message}">Apollo University, Delhi, India Test</p>-->
                <!--<span class="time_dateInMes" th:utext="${mesS.date}"> 11:01 AM    |    Today</span>-->
            <!--</div>-->
        <!--</div>-->
        <!--<div th:if="${mesS.sender == #httpServletRequest.remoteUser}" class="outgoing_msg" >-->
            <!--<div class="sent_msg">-->
                <!--<p th:utext="${mesS.message}">Apollo University, Delhi, India Test</p>-->
                <!--<span class="time_dateOutMes" th:utext="${mesS.date}"> 11:01 AM    |    Today</span>-->
            <!--</div>-->
        <!--</div>-->
    <!--</div>-->
    <!--<span id="endpage"></span>-->
<!--</div>-->


<div class="enter" id="enterID" style="visibility: hidden">
    <div class="type_msg">
        <form id="customerForm">
            <div class="input_msg_write">
                <textarea id="message" maxlength="1000" type="message1" name="message" class="write_msg" placeholder="Введите сообщение" autocomplete="off" required></textarea>
                <button class="msg_send_btn" type="submit"><i class="fa fa-paper-plane-o" aria-hidden="true"></i></button>
            </div>
        </form>
    </div>
</div>
<!--<div class="getEnterMessage2" th:if="${test == null}">-->
    <!--<div class="getEnterMessage">-->
        <!--<img src="https://img.icons8.com/color/96/000000/chat.png">-->
        <!--<a>Выберите диалог</a>-->
    <!--</div>-->
<!--</div>-->

</body>
</html>